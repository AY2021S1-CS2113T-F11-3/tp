@startuml
!include style.puml

box Logic LOGIC_COLOR_T1
participant ":PreviewCommand" as P LOGIC_COLOR
end box

box Ui UI_COLOR_T1
participant "ui:Ui" as U UI_COLOR
end box

box Storage STORAGE_COLOR_T1
participant "storage:Storage" as S STORAGE_COLOR
participant ":StorageLoad" as SL STORAGE_COLOR
end box

skinparam sequence {
  GroupBodyBackgroundColor Transparent
}

-> P : execute()
activate P
    P -> P : loadAllDueChapters()
    activate P
    P -> S : loadAllDueChapters()
    activate S
    S -> SL : loadAllChaptersAsDueChapters()
    activate SL
    SL --> S : allDueChapters
    deactivate SL
    S --> P : allDueChapters
    deactivate S
    deactivate P
    loop for increment from 0 to 6
        P -> P : setDueDueChapters()
        activate P
        deactivate P
        alt if increment equals 0
            P -> U : printDueByTodayMessage()
            activate U
            U --> P
            deactivate U
        else increment larger than 0
            P -> U : printDueByIncrementMessage()
        end
        P -> U : printDueChapters(DueDueChapters)
        activate U
        U --> P
        deactivate U
    end
deactivate P
@enduml
